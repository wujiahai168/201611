{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\cases\\graphics\\demo/assets\\cases\\graphics\\demo\\sine-waves.js"],"names":["PI180","Math","PI","PI2","HALFPI","Ease","linear","percent","amplitude","sinein","sin","sineout","sineinout","EaseEnumOptins","k","Enum","cc","Waves","sine","x","sign","isNaN","square","sawtooth","floor","triangle","abs","WavesEnumOptins","Wave","Class","name","properties","timeModifier","wavelength","segmentLength","lineWidth","waveType","default","type","easeType","strokeColor","color","SineWaves","extends","Component","speed","waves","onLoad","time","ctx","getComponent","Graphics","lineCap","LineCap","BUTT","lineJoin","LineJoin","ROUND","i","l","length","waveFn","bind","easeFn","update","dt","clear","yAxis","visibleRect","height","width","waveWidth","waveLeft","drawWave","options","moveTo","lineTo","point","getPoint","y","stroke","position","module","exports"],"mappings":"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","file":"sine-waves.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\cases\\graphics\\demo","sourcesContent":["// https://github.com/isuttell/sine-waves\n\n/************************************************\n * @file  Constants\n * @author  Isaac Suttell\n ************************************************/\n \n/**\n * For radian conversion\n *\n * @constant\n * @type    {Number}\n */\nvar PI180 = Math.PI / 180;\n\n/**\n * Twice of PI\n *\n * @constant\n * @type {Number}\n */\nvar PI2 = Math.PI * 2;\n\n/**\n * Half of PI\n *\n * @constant\n * @type {Number}\n */\nvar HALFPI = Math.PI / 2;\n\n/************************************************\n * @file  Left to right easing functions\n * @author Isaac Suttell\n ************************************************/\n\n/**\n * This holds all of the easing objects and can be added to by the user\n *\n * @type    {Object}\n */\nvar Ease = {};\n\n/**\n * Do not apply any easing\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.linear = function(percent, amplitude) {\n  return amplitude;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sinein = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * Math.PI - HALFPI) + 1) * 0.5;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sineout = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * Math.PI + HALFPI) + 1) * 0.5;\n};\n\n/**\n * Easing function to control how string each wave is from\n * left to right\n *\n * @param  {Number} percent   where in the line are we?\n * @param  {Number} amplitude the current strength\n *\n * @return {Number}           the new strength\n */\nEase.sineinout = function(percent, amplitude) {\n  return amplitude * (Math.sin(percent * PI2 - HALFPI) + 1) * 0.5;\n};\n\nlet EaseEnumOptins = {};\nfor (let k in Ease) {\n    EaseEnumOptins[k] = -1;\n}\nEase.Enum = cc.Enum(EaseEnumOptins);\n\n/************************************************\n * @file  Sine Wave functions\n * @author Isaac Suttell\n ************************************************/\n\n/**\n * Holds the different types of waves\n *\n * @type    {Object}\n */\nvar Waves = {};\n\n/**\n * Default Sine Waves\n *\n * @param    {Number}    x\n */\nWaves.sine = function(x) {\n  return Math.sin(x);\n};\n\n\n/**\n * Sign polyfill\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n *\n * @param     {Number}    x\n *\n * @return    {Number}\n */\nWaves.sign = function(x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n/**\n * Square Waves\n *\n * @param    {Number}    x\n */\nWaves.square = function(x) {\n  return Waves.sign(Math.sin(x * PI2));\n};\n\n/**\n * Sawtooth Waves\n *\n * @param    {Number}    x\n */\nWaves.sawtooth = function(x) {\n  return (x - Math.floor(x + 0.5)) * 2;\n};\n\n/**\n * Triangle Waves\n *\n * @param    {Number}    x\n */\nWaves.triangle = function(x) {\n  return Math.abs(Waves.sawtooth(x));\n};\n\nlet WavesEnumOptins = {};\nfor (let k in Waves) {\n    WavesEnumOptins[k] = -1;\n}\nWaves.Enum = cc.Enum(WavesEnumOptins);\n\n\nlet Wave = cc.Class({\n    name: 'Wave',\n\n    properties: {\n        timeModifier: 1,\n        amplitude: 50,\n        wavelength: 50,\n        segmentLength: 10,\n        lineWidth: 1,\n        waveType: {\n            default: Waves.Enum.sine,\n            type: Waves.Enum\n        },\n        easeType: {\n            default: Ease.Enum.sinein,\n            type: Ease.Enum\n        },\n        strokeColor: cc.color(255, 255, 255, 100)\n    }\n});\n\nlet SineWaves = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        speed: 1,\n\n        waves: {\n            default: function () {\n                return [new Wave()];\n            },\n            type: [Wave]\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.time = 0;\n\n        this.ctx = this.getComponent(cc.Graphics);\n        this.ctx.lineCap = cc.Graphics.LineCap.BUTT;\n        this.ctx.lineJoin = cc.Graphics.LineJoin.ROUND;\n\n        let waves = this.waves;\n        for (let i = 0, l = waves.length; i < l; i++) {\n            waves[i].waveFn = Waves[Waves.Enum[waves[i].waveType]].bind(Waves);\n            waves[i].easeFn = Ease[Ease.Enum[waves[i].easeType]].bind(Ease);\n        }\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        this.ctx.clear();\n\n        this.yAxis = cc.visibleRect.height/2;\n        this.width = cc.visibleRect.width;\n\n        this.waveWidth = this.width * 0.95;\n        this.waveLeft = this.width * 0.25;\n\n        this.time += dt;\n\n        // Draw each line\n        let waves = this.waves;\n        for (let i = 0, l = waves.length; i < l; i++) {\n            var timeModifier = this.waves[i].timeModifier || 1;\n            this.drawWave(this.time * timeModifier, waves[i]);\n        }\n    },\n\n    /**\n     * Draws one line on the canvas\n     *\n     * @param  {Number} time    current internal clock time\n     * @param  {Object} options wave options\n     */\n    drawWave: function (time, options) {\n        // Styles\n        this.ctx.lineWidth = options.lineWidth;\n        this.ctx.strokeColor = options.strokeColor;\n\n        // Starting Line\n        this.ctx.moveTo(0, this.yAxis);\n        this.ctx.lineTo(this.waveLeft, this.yAxis);\n\n        for (let i = 0; i < this.waveWidth; i += options.segmentLength) {\n            // Calculate where the next point is\n            let point = this.getPoint(time, i, options);\n\n            // Draw to it\n            this.ctx.lineTo(point.x, point.y);\n        }\n\n        // Ending Line\n        this.ctx.lineTo(this.width, this.yAxis);\n\n        // Stroke it\n        this.ctx.stroke();\n    },\n\n    /**\n     * Calculate the x, y coordinates of a point in a sine wave\n     *\n     * @param  {Number} time     Internal time index\n     * @param  {Number} position Pixels x poistion\n     * @param  {Object} options  Wave options\n     *\n     * @return {Object}          {x, y}\n     */\n    getPoint: function(time, position, options) {\n        var x = (time * this.speed) + (-this.yAxis + position) / options.wavelength;\n        var y = options.waveFn(x);\n\n        // Left and Right Sine Easing\n        var amplitude = options.easeFn(position / this.waveWidth, options.amplitude);\n\n        x = position + this.waveLeft;\n        y = amplitude * y + this.yAxis;\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n});\n\nmodule.exports = SineWaves;\n"]}