{"version":3,"sources":["PoolHandler.js"],"names":["lastClick","pauseresume","now","Date","stopAllActions","pool","getComponent","_pool","put","removeFromParent","paused","cc","director","getActionManager","resumeTarget","pauseTarget","Class","extends","Component","properties","onLoad","reuse","unuse","node","off","Node","EventType","TOUCH_END","on"],"mappings":";;;;;;AAAA,IAAIA,YAAY,CAAhB;;AAEA,SAASC,WAAT,GAAwB;AACpB,QAAIC,MAAMC,KAAKD,GAAL,EAAV;AACA;AACA,QAAIA,MAAMF,SAAN,GAAkB,GAAtB,EAA2B;AACvB,aAAKI,cAAL;AACA,YAAIC,OAAO,KAAKC,YAAL,CAAkB,aAAlB,EAAiCC,KAA5C;AACA,YAAIF,IAAJ,EAAU;AACNA,iBAAKG,GAAL,CAAS,IAAT;AACH,SAFD,MAGK;AACD,iBAAKC,gBAAL,CAAsB,IAAtB;AACH;AACJ;AACD;AAVA,SAWK;AACD,gBAAI,KAAKC,MAAT,EAAiB;AACbC,mBAAGC,QAAH,CAAYC,gBAAZ,GAA+BC,YAA/B,CAA4C,IAA5C;AACH,aAFD,MAGK;AACDH,mBAAGC,QAAH,CAAYC,gBAAZ,GAA+BE,WAA/B,CAA2C,IAA3C;AACH;AACD,iBAAKL,MAAL,GAAc,CAAC,KAAKA,MAApB;AACH;AACDV,gBAAYE,GAAZ;AACH;;AAEDS,GAAGK,KAAH,CAAS;AACLC,aAASN,GAAGO,SADP;;AAGLC,gBAAY;AACRZ,eAAO;AADC,KAHP;;AAOLa,YAAQ,kBAAY;AAChB,aAAKC,KAAL;AACH,KATI;;AAWLC,WAAO,iBAAY;AACf,aAAKC,IAAL,CAAUC,GAAV,CAAcb,GAAGc,IAAH,CAAQC,SAAR,CAAkBC,SAAhC,EAA2C1B,WAA3C,EAAwD,KAAKsB,IAA7D;AACH,KAbI;;AAeLF,WAAO,iBAAY;AACf,aAAKE,IAAL,CAAUb,MAAV,GAAmB,KAAnB;AACA,aAAKa,IAAL,CAAUK,EAAV,CAAajB,GAAGc,IAAH,CAAQC,SAAR,CAAkBC,SAA/B,EAA0C1B,WAA1C,EAAuD,KAAKsB,IAA5D;AACH;AAlBI,CAAT","file":"PoolHandler.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\cases\\05_scripting\\12_pool","sourcesContent":["var lastClick = 0;\n\nfunction pauseresume () {\n    var now = Date.now();\n    // Double click in 300 ms\n    if (now - lastClick < 300) {\n        this.stopAllActions();\n        var pool = this.getComponent('PoolHandler')._pool;\n        if (pool) {\n            pool.put(this);\n        }\n        else {\n            this.removeFromParent(true);\n        }\n    }\n    // Click\n    else {\n        if (this.paused) {\n            cc.director.getActionManager().resumeTarget(this);\n        }\n        else {\n            cc.director.getActionManager().pauseTarget(this);\n        }\n        this.paused = !this.paused;\n    }\n    lastClick = now;\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _pool: null\n    },\n    \n    onLoad: function () {\n        this.reuse();\n    },\n    \n    unuse: function () {\n        this.node.off(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\n    },\n    \n    reuse: function () {\n        this.node.paused = false;\n        this.node.on(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\n    }\n});\n"]}