{"version":3,"sources":["game.js"],"names":["Global","require","cc","Class","extends","Component","properties","player","type","Node","default","enemy","Prefab","speed","accSpeedInt","particle","ParticleAsset","particleNode","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","p","find","color","Color","schedule","spawnEnemy","start","particleX","particleY","update","dt","x","accLeft","accSpeed","accRight","accUp","y","accDown","event","keyCode","macro","KEY","up","down","left","right","newEnemy","instantiate","log","node","addChild","setPosition","setEnemyPosition","Math","random","winSize","width","height","v2"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\0424","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\n// window.global = {\r\n//     score_int = 0,\r\n// };\r\n\r\nvar Global = require(\"global\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player:{\r\n            type:cc.Node,\r\n            default:null,\r\n        },\r\n\r\n        enemy:{\r\n            type:cc.Prefab,\r\n            default:null,\r\n        },\r\n\r\n        speed:10,\r\n\r\n        accSpeedInt:0.2,\r\n    \r\n        particle:{\r\n            type:cc.ParticleAsset,\r\n            default:null,\r\n        },\r\n\r\n        particleNode:{\r\n            type:cc.Node,\r\n            default:null,\r\n        },\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n        this.p = cc.find(\"Canvas/player\");\r\n        this.p.color = new cc.Color(255,0,0);\r\n\r\n        this.schedule(this.spawnEnemy,1,1000);\r\n\r\n    },\r\n\r\n    start () {\r\n        this.particleX = 0;\r\n        this.particleY = 0;\r\n    },\r\n\r\n    update (dt) {\r\n\r\n        this.particleNode.x = this.particleNode.x + 10;\r\n        \r\n        //this.particleNode.x = this.particleX + 50 * dt * ( Math.random() > 0.5 ? -1 : 1 );\r\n        //this.particleNode.Y = this.particleY + 50 * dt * ( Math.random() > 0.5 ? -1 : 1 );\r\n\r\n        if( this.accLeft ){\r\n            this.accSpeed += dt+this.accSpeedInt ;\r\n            this.p.x -= this.accSpeed * this.speed;\r\n        }\r\n        if( this.accRight ){\r\n            this.accSpeed += dt+this.accSpeedInt ;\r\n            this.p.x += this.accSpeed * this.speed;\r\n        }\r\n        if( this.accUp ){\r\n            this.accSpeed += dt+this.accSpeedInt ;\r\n            this.p.y += this.accSpeed * this.speed;\r\n        }\r\n        if( this.accDown ){\r\n            this.accSpeed += dt+this.accSpeedInt ;\r\n            this.p.y -= this.accSpeed * this.speed;\r\n        }\r\n        \r\n        if( !this.accLeft || !this.accRight || !this.accUp || !this.accDown ){\r\n            this.accSpeed = 0 ;\r\n        }\r\n    },\r\n\r\n    // update (dt) {\r\n    //     if( this.accLeft ){\r\n    //         this.accSpeed += dt+this.accSpeedInt ;\r\n    //         this.player.x -= this.accSpeed * this.speed;\r\n    //     }\r\n    //     if( this.accRight ){\r\n    //         this.accSpeed += dt+this.accSpeedInt ;\r\n    //         this.player.x += this.accSpeed * this.speed;\r\n    //     }\r\n    //     if( this.accUp ){\r\n    //         this.accSpeed += dt+this.accSpeedInt ;\r\n    //         this.player.y += this.accSpeed * this.speed;\r\n    //     }\r\n    //     if( this.accDown ){\r\n    //         this.accSpeed += dt+this.accSpeedInt ;\r\n    //         this.player.y -= this.accSpeed * this.speed;\r\n    //     }\r\n        \r\n    //     if( !this.accLeft || !this.accRight || !this.accUp || !this.accDown ){\r\n    //         this.accSpeed = 0 ;\r\n    //     }\r\n    // },\r\n\r\n    onKeyDown(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.up:\r\n                this.accUp = true;\r\n                break;\r\n            case cc.macro.KEY.down:\r\n                this.accDown = true;\r\n                break;\r\n            case cc.macro.KEY.left:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.up:\r\n                this.accUp = false;\r\n                break;\r\n            case cc.macro.KEY.down:\r\n                this.accDown = false;\r\n                break;\r\n            case cc.macro.KEY.left:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    },\r\n\r\n    spawnEnemy(){\r\n        var newEnemy = cc.instantiate( this.enemy );\r\n        cc.log(newEnemy);\r\n        this.node.addChild(newEnemy);\r\n        newEnemy.setPosition( this.setEnemyPosition() );\r\n    },\r\n\r\n    setEnemyPosition(){\r\n        var x = ( Math.random()>0.5 ? 1 : -1 ) * Math.random() * cc.winSize.width / 2 ;\r\n        var y = (1+Math.random()) * cc.winSize.height / 2 ;\r\n        return cc.v2( x, y );\r\n    },\r\n\r\n});\r\n"]}