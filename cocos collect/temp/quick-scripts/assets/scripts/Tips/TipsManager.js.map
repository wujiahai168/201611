{"version":3,"sources":["TipsManager.js"],"names":["module","exports","tispPrefab","SupportConfig","name","cc","sys","isNative","isMobile","capabilities","platform","QQ_PLAY","ANDROID","CC_PREVIEW","WECHAT_GAME","DESKTOP_BROWSER","game","renderType","RENDER_TYPE_WEBGL","isBrowser","init","tipsPrefab","loader","loadRes","err","prefab","createTips","content","node","instantiate","tipsCtrl","getComponent","setContent","parent","director","getScene","hasSupport","hideTip","support","undefined"],"mappings":"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","file":"TipsManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Tips","sourcesContent":["//\n// 用于提示用户哪些范例不支持平台\n//\n\nmodule.exports = {\n    tispPrefab: null,\n\n    SupportConfig: function (name) {\n        switch (name) {\n            case 'downloader-web':\n            case 'EditBoxTabIndex':     return !cc.sys.isNative;\n            case 'OnMultiTouchInput':   return cc.sys.isMobile;\n            case 'webp-test':           return cc.sys.capabilities['webp'];\n            case 'DeviceMotion':        return cc.sys.isMobile && cc.sys.platform !== cc.sys.QQ_PLAY;\n            case 'Native_Call':         return cc.sys.isMobile && cc.sys.platform === cc.sys.ANDROID;\n            case 'TTFFontLabel':        return cc.sys.platform !== cc.sys.QQ_PLAY;\n            case 'subpackage':          return (!CC_PREVIEW && cc.sys.platform !== cc.sys.QQ_PLAY);\n            case 'render_to_canvas':    return (!cc.sys.isNative && cc.sys.platform !== cc.sys.QQ_PLAY && cc.sys.platform !== cc.sys.WECHAT_GAME);\n            case 'MousePropagation':    return ((cc.sys.isNative && !cc.sys.isMobile && cc.sys.platform !== cc.sys.WECHAT_GAME && cc.sys.platform !== cc.sys.QQ_PLAY) || cc.sys.platform === cc.sys.DESKTOP_BROWSER);\n            case 'downloader-native':   return cc.sys.isNative;\n\n            // 不支持 QQ_PLAY，WECHAT_GAME 平台\n            case 'render_to_sprite':\n                return (cc.sys.platform !== cc.sys.QQ_PLAY && cc.sys.platform !== cc.sys.WECHAT_GAME);\n\n            // 只支持 RENDER_TYPE_WEBGL\n            case 'MotionStreak':\n            case 'Mask_IMAGE_STENCIL':\n            case 'Mask_NESTED':\n                return cc.game.renderType === cc.game.RENDER_TYPE_WEBGL;\n\n            // 不支持 isMobile\n            case 'KeyboardInput':\n            case 'platform':\n                return !cc.sys.isMobile;\n\n            // 不支持 模拟器，QQ_PLAY，WECHAT_GAME 平台\n            case 'fullscreenVideo':\n            case 'videoPlayer':\n            case 'webview':\n                // 2.0 native still not support the video play feature.\n                return (!cc.sys.isNative && (cc.sys.isMobile || cc.sys.isBrowser) && cc.sys.platform !== cc.sys.QQ_PLAY && cc.sys.platform !== cc.sys.WECHAT_GAME);\n        }\n    },\n\n    init () {\n        if (this.tipsPrefab) return;\n\n        cc.loader.loadRes('tips/Tips', (err, prefab) => {\n            this.tispPrefab = prefab;\n        });\n    },\n\n    createTips (content) {\n        let node = cc.instantiate(this.tispPrefab);\n        let tipsCtrl = node.getComponent('TipsCtrl');\n        if (content) {\n            tipsCtrl.setContent(content);\n        }\n        node.parent = cc.director.getScene();\n    },\n\n    hasSupport (name, hideTip) {\n        let support = this.SupportConfig(name);\n        if (!support && support !== undefined) {\n            if (!hideTip) {\n                this.createTips();\n            }\n            return false;\n        }        \n        return true;\n    }\n};\n"]}